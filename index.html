<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta property="og:title" content="–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–¥–æ–≤ –¥–ª—è –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–≥–æ –º–µ–Ω—é Deepal S07">
    <meta property="og:description" content="–í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å SHA256-–∫–æ–¥–æ–≤ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–µ –º–µ–Ω—é –ø–æ VIN –∏ –¥–∞—Ç–µ. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–º–µ—â–µ–Ω–∏–π –∏ –∫–æ–¥–æ–≤ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://github.com/vladpopovv">
    <meta name="description" content="–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–¥–æ–≤ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–µ –º–µ–Ω—é Deepal S07 –ø–æ VIN –∏ –¥–∞—Ç–µ. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–º–µ—â–µ–Ω–∏–π, SHA256, –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–∞–±–æ—Ç–∞.">
    <meta name="keywords" content="Deepal S07, –¥–∏–ø–∞–ª, –¥–∏–ø–∞–ª –∫–æ–¥, –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–µ –º–µ–Ω—é, VIN –∫–æ–¥, SHA256, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–¥–æ–≤, –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–µ –∫–æ–¥—ã, Shenlan, Changan, S7, S07, –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π –¥–æ—Å—Ç—É–ø">
    <meta name="author" content="vladpopovv">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deepal S07 –∫–æ–¥ –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–≥–æ –º–µ–Ω—é</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background: #f4f4f4;
        margin: 0;
        padding: 0;
      }
      .container {
        max-width: 600px;
        margin: 30px auto;
        padding: 20px;
        border-radius: 10px;
        background-color: #fff;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      }
      h1 {
        text-align: center;
        font-size: 1.5em;
      }
      label {
        display: block;
        margin-top: 15px;
        font-weight: bold;
      }
      input {
        box-sizing: border-box;
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        border: 1px solid #ccc;
        border-radius: 6px;
        font-size: 1em;
      }
      button {
        margin-top: 20px;
        width: 100%;
        padding: 12px;
        background-color: #007bff;
        color: white;
        font-size: 1em;
        border: none;
        border-radius: 6px;
        cursor: pointer;
      }
      button:hover {
        background-color: #0056b3;
      }
      pre {
        background: #eee;
        padding: 10px;
        border-radius: 5px;
        overflow-x: auto;
        white-space: pre-wrap;
        font-size: 0.95em;
      }
    </style>
</head>
<body>
<div class="container">
    <h1>Deepal S07 –∫–æ–¥ –∏–Ω–∂–µ–Ω–µ—Ä–Ω–æ–≥–æ –º–µ–Ω—é</h1>

    <label for="vin">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã VIN:</label>
    <input type="text" id="vin" maxlength="4" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: 3506">

    <label for="date">–î–∞—Ç–∞ (–ø–æ –ö–∏—Ç–∞—é):</label>
    <input type="date" id="date">

    <button onclick="generate()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>

    <div id="result" style="margin-top: 20px;"></div>
</div>

<script>
	// –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã
	document.addEventListener("DOMContentLoaded", () => {
		const today = new Date();
		const yyyy = today.getFullYear();
		const mm = String(today.getMonth() + 1).padStart(2, '0');
		const dd = String(today.getDate()).padStart(2, '0');
		document.getElementById("date").value = `${yyyy}-${mm}-${dd}`;
	});

	async function generate() {
		const vin = document.getElementById("vin").value.trim();
		const dateStr = document.getElementById("date").value;
		const resultDiv = document.getElementById("result");

		if (!/^\d{4}$/.test(vin)) {
			resultDiv.innerHTML = `<pre>‚ùå –£–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π VIN (4 —Ü–∏—Ñ—Ä—ã)</pre>`;
			return;
		}

		if (!dateStr) {
			resultDiv.innerHTML = `<pre>‚ùå –£–∫–∞–∂–∏—Ç–µ –¥–∞—Ç—É</pre>`;
			return;
		}

		const date = new Date(dateStr);
		const outputMain = await calculateCodes(vin, date);

		const nextDate = new Date(date);
		nextDate.setDate(date.getDate() + 1);
		const outputNext = await calculateCodes(vin, nextDate);

		resultDiv.innerHTML = `<pre>${outputMain}
‚ö†Ô∏è –ï—Å–ª–∏ –∫–æ–¥ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª ‚Äî –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å –¥–∞—Ç–æ–π –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å:

${outputNext}</pre>`;
	}

	async function calculateCodes(vin, date) {
		const mmdd = String(date.getMonth() + 1).padStart(2, '0') + String(date.getDate()).padStart(2, '0');
		const base = vin + mmdd;

		const encoder = new TextEncoder();
		const data = encoder.encode(base);
		const hashBuffer = await crypto.subtle.digest('SHA-256', data);
		const hashArray = Array.from(new Uint8Array(hashBuffer));
		const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');

		const day = date.getDate();
		let output = `üìÖ –î–∞—Ç–∞: ${date.toLocaleDateString('ru-RU')}  |  VIN: ${vin}

üî¨ SHA256:
${hashHex}

‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ (—Å–¥–≤–∏–≥ +1):
`;

		const centerIndex = day + 1;
		if (centerIndex >= 0 && centerIndex + 8 <= hashHex.length) {
			const mainCode = hashHex.slice(centerIndex, centerIndex + 8);
			output += `‚û° ${mainCode}
`;
		}

		output += `
üîÅ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
`;
		for (let offset = -2; offset <= 2; offset++) {
			const start = day + offset;
			if (start >= 0 && start + 8 <= hashHex.length && offset !== 1) {
				const code = hashHex.slice(start, start + 8);
				const label = offset === 0 ? '–ø–æ —Ü–µ–Ω—Ç—Ä—É' : `—Å–¥–≤–∏–≥ ${offset > 0 ? '+' : ''}${offset}`;
				output += `‚Ä¢ ${code} (${label})
`;
			}
		}
		return output;
	}
</script>
</body>
</html>
